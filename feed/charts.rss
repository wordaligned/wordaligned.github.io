<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" >
<channel>
<title>Word Aligned</title>
<link>http://wordaligned.org</link>
<description>tales from the code face</description>
<dc:creator>tag@wordaligned.org</dc:creator>
<language>en-gb</language>
<item>
<title>Bike charts by Google</title>
<description>&lt;p&gt;I&amp;#8217;ve liked the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google chart API&lt;/a&gt; ever since &lt;a href=&quot;http://wordaligned.org/articles/the-maximum-subsequence-problem.html&quot; title=&quot;My first charts using the google API&quot;&gt;I first discovered it&lt;/a&gt;. Pack a text definition of an image into a URL &lt;code&gt;http://chart.apis.google.com/chart?YOUR-IMAGE-HERE&lt;/code&gt; and you&amp;#8217;ll be served up a freshly cooked PNG. It&amp;#8217;s free. There&amp;#8217;s not even a watermark.&lt;/p&gt;
&lt;p&gt;&lt;img width=&quot;320px&quot; height=&quot;160px&quot; src=&quot;http://chart.apis.google.com/chart?chs=320x160&amp;amp;cht=gom&amp;amp;chd=t:70&amp;amp;chl=Nice!&quot; alt=&quot;Swing-o-meter, Nice!&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
http://chart.apis.google.com/chart?  # A chart, please
    &amp;chs=320x160                     # sized 320x160 pixels
    &amp;cht=gom                         # of type swin&lt;b&gt;gom&lt;/b&gt;eter
    &amp;chd=t:70                        # with 70% swing
    &amp;chl=Nice!                       # labeled &quot;Nice!&quot;
&lt;/pre&gt;

&lt;p&gt;Gone are the days when the &lt;a href=&quot;http://code.google.com/apis/chart/docs/making_charts.html&quot; title=&quot;main entry point to the google chart API docs&quot;&gt;documentation&lt;/a&gt; fitted on a single web-page. The API has fattened up and filled out. Every time I visit something new has been added: &lt;a href=&quot;http://code.google.com/apis/chart/docs/gallery/formulas.html&quot; title=&quot;or should that be formulas?&quot;&gt;mathematical formulae&lt;/a&gt; written in TeX; a &lt;a href=&quot;http://code.google.com/apis/chart/docs/chart_playground.html&quot; title=&quot;Live chart playground&quot;&gt;playground&lt;/a&gt; where you can sketch a chart directly; a &lt;a href=&quot;http://code.google.com/intl/uk/apis/chart/docs/debugging.html&quot;&gt;validation&lt;/a&gt; option which tells you where you went wrong &amp;#8212; much more helpful than a bare 404.&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;continue-reading&quot;/&gt;&lt;/p&gt;
&lt;p&gt;New to me: &lt;a href=&quot;http://code.google.com/apis/chart/docs/gallery/dynamic_icons.html&quot; title=&quot;dynamic icons - callouts, bubbles, pins, and other graphics&quot;&gt;dynamic icons&lt;/a&gt;, which let you create &amp;#8220;a variety of interesting callouts, pins, or bubbles that mix text and images&amp;#8221;. &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://chart.apis.google.com/chart?chst=d_fnote&amp;amp;chld=thought|2|993300|h|We+could+have+|fun+with+this!&quot; alt=&quot;here&#x27;s a thought...&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://chart.apis.google.com/chart?chst=d_bubble_icon_texts_big&amp;amp;chld=bicycle|bb|ffff33|663300|Classic+Tour+Finishes|Let&#x27;s+make+some+charts+which+depict|classic+stage+finishes+in+the+Tour+de+France&quot; alt=&quot;classic cycle charts&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://chart.apis.google.com/chart?chst=d_bubble_text_small&amp;amp;chld=bbbr|Good+idea,+go+for+it!|ffff33|663300&quot; alt=&quot;Go for it!&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Mercurial manxman Mark Cavendish won an incredible &lt;strong&gt;6 stages&lt;/strong&gt; of last year&amp;#8217;s Tour. Here he is, becoming the first Briton ever to win the final showdown on the Champs-&amp;Eacute;lys&amp;eacute;es, and winning it by an immense margin. For me, it was a bitter-sweet moment: that sprint should have put Cav in the green jersey, but he&amp;#8217;d thrown away his chance in the points competition earlier in the race with an &lt;a href=&quot;http://tag.wordaligned.org/posts/cav-wants-race&quot;&gt;act of petulance&lt;/a&gt; which I still struggle to understand.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Cavendish, first on the the Champs-&amp;Eacute;lys&amp;eacute;es&quot; src=&quot;http://chart.apis.google.com/chart?&amp;amp;cht=lc&amp;amp;chs=540x280&amp;amp;chls=4,3,0&amp;amp;chd=s:ZZZZZZZZZZZZZZZZZZZ&amp;amp;chco=aaaaaa&amp;amp;chm=B,0000ff,0,0:7,0|B,ffffff,0,6:12,0|B,ff0000,0,12:,0,&amp;amp;chem=y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=0,10;dp=15|y;s=simple_text_icon_left;d=,14,000,helicopter,24,000,FFF;of=0,120;dp=11|y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=0,10;dp=10|y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=0,10;dp=9|y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=0,10;dp=range,3,9,.8|y;s=simple_text_icon_left;d=,14,000,civic-building,24,000,FFF;of=0,14;dp=1&quot;/&gt;&lt;/p&gt;
&lt;p&gt;The Champs-&amp;Eacute;lys&amp;eacute;es may have a cobbled surface but it&amp;#8217;s level and straight &amp;#8212; definitely one for the sprinters. How about something twisted and mountainous? This second tableau recreates Fabian Cancellara&amp;#8217;s dare-devil descent during stage 7 of last year&amp;#8217;s tour. Defending the maillot jaune, Cancellara got dropped by the peleton following a wheel change. Watch him weave between team cars and camera bikes at top speed to regain his place. &lt;a href=&quot;http://www.youtube.com/watch?v=RxXqQqAc2pA&quot; title=&quot;Watch Cancellara&#x27;s descent on YouTube&quot;&gt;Awesome!&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Cancellara descending&quot; src=&quot;http://chart.apis.google.com/chart?cht=lc&amp;amp;chs=540x280&amp;amp;chls=4,3,0&amp;amp;chd=s:zyxwwvuttsrppponmmlkjihgfedcbaZYXVUUUTSRQONNMLKJIHHHGFEEEDCCCCCBBBBB&amp;amp;chco=aaaaaa&amp;amp;chm=B,ffff33,0,0,0&amp;amp;chem=y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=4,8;dp=11|y;s=simple_text_icon_left;d=,14,000,car-dealer,24,000,FFF;of=0,10;dp=range,15,24,4|y;s=simple_text_icon_left;d=,14,000,helicopter,24,000,FFF;of=0,80;dp=16|y;s=simple_text_icon_left;d=,14,000,motorcycle,24,000,FFF;of=0,6;dp=range,7,21,9|y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=4,8;dp=range,45,60,2&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Now for a real classic &amp;#8212; when Stephen Roche dug deep during an epic mountain stage in the 1987 Tour. Pedro Delgado, wearing yellow, had built a substantial lead over his rival on the climb up La Plagne. Yet somehow Roche clawed his way back into contention, appearing at the finish line just 5 seconds down on Delgado. He surprised everyone. He collapsed, exhausted, and had to be given oxygen, but he&amp;#8217;d done enough. Roche went on to win the Tour. &lt;a href=&quot;http://www.youtube.com/watch?v=sQojh-wqL04&quot; title=&quot;Roche at La Plagne, commentary by Phil Liggett&quot;&gt;Formidable!&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;IT&#x27;S STEPHEN ROCHE!&quot; src=&quot;http://chart.apis.google.com/chart?cht=lc&amp;amp;chs=540x280&amp;amp;chls=4,3,0&amp;amp;chd=s:ACDEHIJKMOQSTUVXYabcdfghjkmnoppqqrssttuu&amp;amp;chco=aaaaaa&amp;amp;chm=B,ffff33,0,0,0&amp;amp;chem=y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=0,10;dp=29|y;s=simple_text_icon_left;d=,14,000,bicycle,24,000,FFF;of=0,12;dp=32|y;s=simple_text_icon_left;d=,14,000,wc-male,24,000,FFF;of=0,16;dp=35|y;s=simple_text_icon_left;d=,14,000,medical,24,000,FFF;of=0,16;dp=37|y;s=bubble_text_small;d=bbbr,that+looks+like+Stephen+Roche....+IT&#x27;S+STEPHEN+ROCHE!,ffff00,000000;of=40,230&quot;/&gt;&lt;/p&gt;</description>
<dc:date>2010-02-18</dc:date>
<guid>http://wordaligned.org/articles/bike-charts</guid>
<author>tag@wordaligned.org (Thomas Guest)</author>
<link>http://wordaligned.org/articles/bike-charts</link>
<category>Charts</category>
</item>

<item>
<title>Eurovision 2008 charts</title>
<description>&lt;p&gt;Last time I visited the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google chart API&lt;/a&gt; I discovered &lt;a href=&quot;http://code.google.com/apis/chart/#maps&quot; title=&quot;Google chart API, map section&quot;&gt;maps had been added&lt;/a&gt;. Since then I&amp;#8217;ve been itching to use them. &lt;a href=&quot;http://www.eurovision.tv/&quot;&gt;Eurovision 2008&lt;/a&gt; got me scratching that itch.&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;Serbia scored 160 points&quot; src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGEMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:jAKAAAo9AZoeAAZAeA99yAyjAAFUjUKAZAFUFePA9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=440x220&quot; alt=&quot;Votes for Serbia&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;continue-reading&quot;/&gt;&lt;/p&gt;
&lt;p&gt;As ever the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;API&lt;/a&gt; is a delight to use, if somewhat restricted. You&amp;#8217;re limited to selecting a geographical area from a small set, but happily this set includes Europe. Chart data is supplied as a string of concatenated &lt;a href=&quot;http://www.iso.org/iso/country_codes/iso_3166_code_lists/english_country_names_and_code_elements.htm&quot;&gt;ISO 3166-1 alpha-2&lt;/a&gt; country codes (e.g. &amp;#8220;TV&amp;#8221; for &amp;#8220;Tuvalu&amp;#8221;), and the chart value for each data point (i.e. country) maps to a colour gradient. Your palette is limited: water masses get a fill colour; a pair of colours provides the gradient used for countries in the chart data string; and omitted countries get a default colour.&lt;/p&gt;
&lt;p&gt;To depict &lt;a href=&quot;http://www.eurovision.tv/&quot;&gt;Eurovision&lt;/a&gt; results I chose suitably lurid colours. The results for Serbia, who hosted the event in 2008, are shown at the top of this page. Serbia appears in yellowy-orange, and the mauvey-bluey colours show who voted for Serbia &amp;#8212; the darker the shade, the higher the vote&lt;a id=&quot;fn1link&quot; href=&quot;http://wordaligned.org/articles/eurovision-2008-charts#fn1&quot;&gt;&lt;sup&gt;&lt;a href=&quot;https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;the-maps&quot;&gt;The Maps&lt;/h3&gt;
&lt;p&gt;Here are the maps in order of &lt;a href=&quot;http://www.eurovision.tv/page/the-final-2008&quot;&gt;Eurovision 2008 scores&lt;/a&gt;. Hover your mouse over them to see the country and the score. If you&amp;#8217;re wondering why you can&amp;#8217;t see Israel, it&amp;#8217;s because Israel isn&amp;#8217;t in Europe.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLROAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:FZAZAAjAPoFAZ9jeZyjUe9ey99oeyo9eZ9eyj9oyoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Russia scored 272 points&quot; alt=&quot;Votes for Russia&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AeZjZjAAFeAAoye9APKPjUUeyeyyPoyoeyjjoZyeUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Ukraine scored 230 points&quot; alt=&quot;Votes for Ukraine&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:PUAP9P9Zo9eFjZAAAejZFPoAAKP9PeK9oKyUZoUoe9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Greece scored 218 points&quot; alt=&quot;Votes for Greece&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:9AFyAAeA9y9Kyo9AAAZeAAFAAAA9U9AjKAjoK99ZFoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Armenia scored 199 points&quot; alt=&quot;Votes for Armenia&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AjyejyAAKAU9KjKK9AKFoAUeUPoZZZejFZFZAjZUAjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Norway scored 182 points&quot; alt=&quot;Votes for Norway&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGEMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:jAKAAAo9AZoeAAZAeA99yAyjAAFUjUKAZAFUFePA9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Serbia scored 160 points&quot; alt=&quot;Votes for Serbia&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSEILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:yAAAoUyeyAyAAAAKUAoAAjZAAAAoK9UyAPZAAAeAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Turkey scored 138 points&quot; alt=&quot;Votes for Turkey&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAAAAAFAjAKA9PPAAAFAAAo9UjAjKyyAjoPoyAjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Azerbaijan scored 132 points&quot; alt=&quot;Votes for Azerbaijan&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:eAAAAAPFZKPAAFAPoPZKAAPAPAZeejZUAUKeAePjZyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Israel scored 124 points&quot; alt=&quot;Votes for Israel&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:KKAAAKZjAAjyeAAAyey9AZAAAAAAAPAAAAAAFAA9yAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Bosnia and Herzegovina scored 110 points&quot; alt=&quot;Votes for Bosnia and Herzegovina&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:A9UKyeAAAAAPAAAoAAAAUjAAyjAAAAAAKAAAPAKAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Latvia scored 83 points&quot; alt=&quot;Votes for Latvia&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMCSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAAAAAAAAjAAUKUFAAAAAZAAoZZAAjUoAAeAPUyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Georgia scored 83 points&quot; alt=&quot;Votes for Georgia&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:oAeoAAUyeAZAAAAAAAAPAAAAAAAAAAPAyAAAAAAFAZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Portugal scored 69 points&quot; alt=&quot;Votes for Portugal&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAUe9AAAAAoAUAjojAAAAAAKAeAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Iceland scored 64 points&quot; alt=&quot;Votes for Iceland&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AF9APAAAAAZAAAZ9AAAAPAKjKUAAAAAAAAAAKAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Denmark scored 60 points&quot; alt=&quot;Votes for Denmark&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAAAAAAoAAAAFAyAAAUFoA9AAAAAAAFAAAAAAAAAjPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Albania scored 55 points&quot; alt=&quot;Votes for Albania&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:ZAAFFAUUUAAPAoyAFAAAAAAAAAAAAAAF9AAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Spain scored 55 points&quot; alt=&quot;Votes for Spain&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLTRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAPFAoAAAFAAFAAjZAAAKAFAF9AAAAAPAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Sweden scored 47 points&quot; alt=&quot;Votes for Sweden&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=IEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AoAKZAAAAAUAAAAFKAAAeAAPoAFAAAAAPAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;France scored 47 points&quot; alt=&quot;Votes for France&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:UPA9AAAAAPAAAeAUAAAAAAAAAAAAAAAAAAA9AAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Romania scored 45 points&quot; alt=&quot;Votes for Romania&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAEEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAAAAAKPAAAAAAAPAAoyAKAZAAAFFAFAAAAAAKFPKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Croatia scored 44 points&quot; alt=&quot;Votes for Croatia&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOSIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAjAAAAAAAAjAAAAUAAAyAAFAAKAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Finland scored 35 points&quot; alt=&quot;Votes for Finland&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;United Kingdom scored 14 points&quot; alt=&quot;Votes for United Kingdom&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKCHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTPLRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAA9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Germany scored 14 points&quot; alt=&quot;Votes for Germany&quot;/&gt;
&lt;img src=&quot;http://chart.apis.google.com/chart?cht=t&amp;amp;chtm=europe&amp;amp;chld=FRIEISESGBDKDECHBECYNLSETRILGRPTNOFISIBAHREEMKHULVLTMTRORUAZUAALADBYBGMDCZAMGECSMESMBDWFBFBBBLBMBNBOJPBIBJBTJMBVBWWSBRBSJEBZRWRELULRLSGWGUGTGSGQGPBHGYGGGFGDGAGNGMGLKWGIGHOMJOHTSVHKHNHMPRPSPWKRPYIQSHPFPGPEPKPHPNPMZMEHEGZAECVNSBETZWSAERMGMFMAMCUZMMMLMOMNMHUSUMMWMVMQMPMSMRAUUGMYMXMZAWAFFJFKFMFONINAVUNCNENFNGNZNPNRNUCKCICOCNCMCLCCCALBCGCFCDCXCRCVCUSZSYKGKESRKIKHKNKMSTSKSJKPSOSNSLSCKZKYSGSDDODMDJYEDZUYYTMUTZLCLATVTWTTLKLITNTOTLTMTJTKTHTFTGTDTCLYVAVCAEVEAGVGAIVIIRITAOANAQASARIMATIOINAXIDPAQA&amp;amp;chd=s:AyAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&amp;amp;chco=FFCC00,FFFFFF,000066&amp;amp;chf=bg,s,00FFCC&amp;amp;chs=250x125&quot; title=&quot;Poland scored 14 points&quot; alt=&quot;Votes for Poland&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;the-script&quot;&gt;The Script&lt;/h3&gt;
&lt;p&gt;Here&amp;#8217;s the script I used to generate the pictures. It&amp;#8217;s hacky, sub-optimal and packed with workarounds to get the job done. As &lt;a href=&quot;http://blog.plover.com/prog/perl/lines.html&quot;&gt;Mark Dominus&lt;/a&gt; puts it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Not everything we do is a brilliant, diamond-like jewel, polished to a luminous gloss with pages torn from one of Donald Knuth&amp;#8217;s books.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I do think the code also shows how adept Python is at working with XML (XHTML in this case) and text processing, and why every programmer should know at least one scripting language.&lt;/p&gt;
&lt;p&gt;As input it needs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the Wikipedia Eurovision 2008 &lt;a href=&quot;http://en.wikipedia.org/wiki/Eurovision_Song_Contest_2008&quot;&gt;page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;the official list of &lt;a href=&quot;http://www.iso.org/iso/list-en1-semic-2.txt&quot;&gt;ISO-3166 alpha-2 codes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;Eurovision charts&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;&amp;#x27;&amp;#x27;&amp;#x27;Generate Eurovision charts using Google chart API.

Method:
* get a mapping between country names and country codes
* find the final results table in the Wikipedia Eurovision page
* extract voting information from this table
* munge all this information into google chart URLs
&amp;#x27;&amp;#x27;&amp;#x27;
import string
import xml.dom

def internal_co_name(co_name):
    &amp;#x27;&amp;#x27;&amp;#x27;Convert a country name into a form used internally.

    We remove punctuation and convert to uppercase. This helps map
    between the official country names and the less standard ones used
    on the Wikipedia page.
    &amp;#x27;&amp;#x27;&amp;#x27;
    ascii = string.ascii_letters
    return &amp;#x27;&amp;#x27;.join(c.upper() for c in co_name if c in ascii)

def country_codes_dict(iso_3166_fp):
    &amp;#x27;&amp;#x27;&amp;#x27;Return a dict mapping country names to 3166-1-alpha-2 codes.

    We get these from the ISO website in a ISO-8859 encoded text file
    which contains a header followed by records of the form
    AFGHANISTAN;AF
    &amp;#x27;&amp;#x27;&amp;#x27;
    import re
    import codecs
    ccode_match = re.compile(r&quot;^([^;]+);(\w\w)&quot;, re.UNICODE).match
    lines = codecs.iterdecode(iso_3166_fp, &quot;iso-8859-1&quot;)
    co_codes = dict((internal_co_name(m.group(1)), m.group(2))
                    for m in map(ccode_match, lines) if m)
    # Add some shortened forms
    co_codes.update(dict(MACEDONIA=&quot;MK&quot;, BOSNIA=&quot;BA&quot;, RUSSIA=&quot;RU&quot;, MOLDOVA=&quot;MD&quot;))
    # Hack! Serbia should be SR but, as at 2008-05-28, the google
    # chart api seems to want the country code for the former Serbian
    # and Montenegro.  This line can be removed once the chart api
    # matches its documentation.
    co_codes[&quot;SERBIA&quot;] = &quot;CS&quot;
    return co_codes

def tree_walk(node):
    &amp;#x27;&amp;#x27;&amp;#x27;Recursively walk the nodes in a tree.&amp;#x27;&amp;#x27;&amp;#x27;
    yield node
    for node1 in node.childNodes:
        for node2 in tree_walk(node1):
            yield node2

def tree_find(root, pred):
    &amp;#x27;&amp;#x27;&amp;#x27;Return the first node for which the predicate holds, or None.&amp;#x27;&amp;#x27;&amp;#x27; 
    for node in tree_walk(root):
        if pred(node):
            return node

def next_sibling_find(node, pred):
    &amp;#x27;&amp;#x27;&amp;#x27;Return the first next-sibling node for which the predicate holds.&amp;#x27;&amp;#x27;&amp;#x27;
    while node.nextSibling:
        node = node.nextSibling
        if pred(node):
            return node

def children(node, name):
    &amp;#x27;&amp;#x27;&amp;#x27;Return (tag-)named child elements of a node.&amp;#x27;&amp;#x27;&amp;#x27;
    return node.getElementsByTagName(name)

def is_text(node):
    return node.nodeType == xml.dom.Node.TEXT_NODE

def is_element(node):
    return node.nodeType == xml.dom.Node.ELEMENT_NODE

def text(node):
    &amp;#x27;&amp;#x27;&amp;#x27;Return text from a node of the general form &amp;lt;td&amp;gt;&amp;lt;b&amp;gt;12&amp;lt;/b&amp;gt;&amp;lt;/td&amp;gt; or &amp;lt;td&amp;gt;0&amp;lt;/td&amp;gt;&amp;#x27;&amp;#x27;&amp;#x27;
    while not is_text(node) and node.childNodes:
        node = node.childNodes[0]
    return node.data if is_text(node) else None

def country_votes(tr):
    &amp;#x27;&amp;#x27;&amp;#x27;Convert a row from the results table.

    Returns country name, score and votes for that country.
    &amp;#x27;&amp;#x27;&amp;#x27;
    td = children(tr, &amp;#x27;td&amp;#x27;)
    co_name, score = text(td[0]), int(text(td[1]))
    votes = [int(text(cell)) for cell in td[2:] if text(cell)]
    return co_name, score, votes

def results(wiki_table, co_code_dict):
    &amp;#x27;&amp;#x27;&amp;#x27;Extract the results from the Wikipedia results table.

    Returns the column headings country codes and a list of votes.
    &amp;#x27;&amp;#x27;&amp;#x27;
    import operator
    second = operator.itemgetter(1)
    trs = children(wiki_table, &amp;#x27;tr&amp;#x27;)
    ths = children(trs[1], &amp;#x27;th&amp;#x27;)[1:]
    # The title of each column header &amp;#x27;a&amp;#x27; element looks like &quot;ESCFranceJ.svg&quot;
    # The [3:-5] slice converts this to &quot;France&quot;, and we then look up
    # the 3166 alpha-2 code
    ICN = internal_co_name
    cols = [co_code_dict[ICN(children(th, &amp;#x27;a&amp;#x27;)[0].getAttribute(&amp;#x27;title&amp;#x27;)[3:-5])]
            for th in ths]
    votes = sorted((country_votes(tr) for tr in trs[2:]), 
                   key=second, reverse=True)
    return cols, votes

def results_table(wiki_page):
    &amp;#x27;&amp;#x27;&amp;#x27;Return the results table from the Wikipedia Eurovision results.

    By inspection, this is the first table after the &quot;Final_2&quot; node.
    &amp;#x27;&amp;#x27;&amp;#x27;
    import xml.dom.minidom
    def final_2(n):
        return is_element(n) and n.getAttribute(&amp;#x27;id&amp;#x27;) == &amp;#x27;Final_2&amp;#x27;
    def htm_table(n):
        return is_element(n) and n.tagName == &amp;#x27;table&amp;#x27;
    doc = xml.dom.minidom.parse(wiki_page)
    node = tree_find(children(doc, &amp;#x27;body&amp;#x27;)[0], final_2)
    return next_sibling_find(node.parentNode, htm_table)

def eurovision_vote_map(co_name, co_codes, scores, hi_score, missing):
    &amp;#x27;&amp;#x27;&amp;#x27;Return the URL of a map showing Eurovision votes for a country.
    &amp;#x27;&amp;#x27;&amp;#x27;
    # Use simple text encoding
    simple = string.uppercase + string.lowercase + string.digits
    simple_hi_ix = len(simple) - 1
    mapurl = (
        &amp;#x27;http://chart.apis.google.com/chart?&amp;#x27;
        &amp;#x27;cht=t&amp;amp;chtm=europe&amp;amp;&amp;#x27;  # Map of Europe
        &amp;#x27;chld=%(countries)s&amp;amp;&amp;#x27; # String of country codes
        &amp;#x27;chd=s:%(values)s&amp;amp;&amp;#x27;   # Values for these countries, simple encoding
        &amp;#x27;chco=%(def_colour)s,%(lo_colour)s,%(hi_colour)s&amp;amp;&amp;#x27;
        &amp;#x27;chf=bg,s,%(sea_colour)s&amp;amp;&amp;#x27;
        &amp;#x27;chs=%(width)dx%(height)d&amp;#x27;)
    # Use a hack here to highlight the country being voted for.  Don&amp;#x27;t
    # include this country in the chart data, then it will get the
    # default colour. Assign all missing entries and zero scoring
    # entries the &amp;#x27;lo_colour&amp;#x27;.
    omit = internal_co_name(co_name)
    values = &amp;#x27;&amp;#x27;.join(simple[simple_hi_ix * score // hi_score] for
                     score in scores) + &amp;#x27;A&amp;#x27; * (len(missing)//2)
    countries = &amp;#x27;&amp;#x27;.join(c for c in co_codes if c != omit) + missing
    width, height = 250, 125 # The maximum map size is 440, 220
    def_colour, sea_colour = &amp;#x27;FFCC00&amp;#x27;, &amp;#x27;00FFCC&amp;#x27;
    lo_colour, hi_colour = &amp;#x27;FFFFFF&amp;#x27;, &amp;#x27;000066&amp;#x27;  
    return mapurl % locals()

def get_map_urls(wiki_results_fp, ccodes_fp):
    &amp;#x27;&amp;#x27;&amp;#x27;Return the URLs for Eurovision results charts, ordered by score.
    &amp;#x27;&amp;#x27;&amp;#x27;
    wiki_table = results_table(wiki_results_fp)
    co_codes = country_codes_dict(ccodes_fp)
    cols, votes = results(wiki_table, co_codes)
    # We only really need the countries which 1) weren&amp;#x27;t part of
    # Eurovision and 2) which appear in the Google chart of Europe, but
    # I don&amp;#x27;t have a definitive list of these. So just treat every
    # country in the world not in Eurovision as missing.
    missing = &amp;#x27;&amp;#x27;.join(set(co_codes.values()) - set(cols))
    hi_score = max(v for _, _, vv  in votes for v in vv)
    return &quot;\n&quot;.join(eurovision_vote_map(co_name, cols, vv, hi_score, missing)
                    for co_name, score, vv in votes)

if __name__ == &amp;#x27;__main__&amp;#x27;:
    # Download from: 
    # http://en.wikipedia.org/wiki/Eurovision_Song_Contest_2008
    # http://www.iso.org/iso/list-en1-semic-2.txt
    # (or use urllib.urlopen on these urls).
    print get_map_urls(open(&amp;#x27;Eurovision_Song_Contest_2008&amp;#x27;),
                       open(&amp;#x27;list-en1-semic-2.txt&amp;#x27;))

&lt;/pre&gt;

&lt;/div&gt;

&lt;h3 id=&quot;serbia-and-montenegro&quot;&gt;Serbia and Montenegro?&lt;/h3&gt;
&lt;p&gt;My program produced bizarre output at first: something was wrong with Serbia, and I assumed I&amp;#8217;d made an &lt;a href=&quot;http://wordaligned.org/articles/joined-output-and-the-fencepost-problem.html&quot;&gt;off-by-one error&lt;/a&gt;. As I write this (2008-05-29) there &lt;a href=&quot;http://groups.google.com/group/google-chart-api/browse_thread/thread/2e821469f810241e&quot;&gt;seems to be a problem&lt;/a&gt; with the way the google chart API handles the country code for Serbia, &amp;#8220;RS&amp;#8221;. That&amp;#8217;s why I&amp;#8217;ve substituted &amp;#8220;CS&amp;#8221;, the old code for Serbia and Montenegro &amp;#8212; a country which ceased to exist in 2006. I&amp;#8217;ll have to adjust the code as the situation (&lt;a href=&quot;http://www.google.co.uk/search?q=3166+serbia+and+montenegro&quot;&gt;both politically and googley&lt;/a&gt;) develops, since the maps which appear on this page are served live by google.&lt;/p&gt;
&lt;h3 id=&quot;terry-wogan&quot;&gt;Terry Wogan&lt;/h3&gt;
&lt;p&gt;I&amp;#8217;m not going to draw any conclusions from these charts except to say that I never thought I&amp;#8217;d mention Wogan on this site, let alone link to the &lt;a href=&quot;http://www.telegraph.co.uk/opinion/main.jhtml?xml=/opinion/2008/05/26/do2603.xml&quot;&gt;Telegraph&lt;/a&gt;. Eurovision voting is clearly a &lt;a href=&quot;http://www.theregister.co.uk/2008/05/06/eurovision_outrage/&quot;&gt;sensitive topic&lt;/a&gt;. I recommend a visit to &lt;a href=&quot;http://successfulsoftware.net/2008/05/26/is-the-eurovision-song-contest-rigged/&quot;&gt;this Andy Brice article&lt;/a&gt;, where he uses software similar to his &lt;a href=&quot;http://www.perfecttableplan.com/html/visualise_your_plan.html&quot;&gt;wedding table planner&lt;/a&gt; to render some more detailed voting maps. The analogy of all these countries having to sit next to each other for a musical event, like grumpy inlaws at a wedding, made me laugh.&lt;/p&gt;
&lt;p&gt;Andy Brice&amp;#8217;s pictures were produced with C++ and Qt following the same QA procedure that I used with the code for this article:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I wrote some throwaway code to generate these images in C++ and Qt over a few hours on a wet bank holiday Sunday. QA amounted to &amp;#8216;that looks about right&amp;#8217;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;a id=&quot;fn1&quot; href=&quot;http://wordaligned.org/articles/eurovision-2008-charts#fn1link&quot;&gt;&lt;a href=&quot;https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/&quot;&gt;1&lt;/a&gt;&lt;/a&gt; Yes, I am colour-blind!&lt;/p&gt;</description>
<dc:date>2008-05-29</dc:date>
<guid>http://wordaligned.org/articles/eurovision-2008-charts</guid>
<author>tag@wordaligned.org (Thomas Guest)</author>
<link>http://wordaligned.org/articles/eurovision-2008-charts</link>
<category>Charts</category>
</item>

<item>
<title>Scatter pictures with Google Charts</title>
<description>&lt;p&gt;In a recent &lt;a href=&quot;http://www.mattcutts.com/blog/pacman-graph-in-google-chart-api/&quot;&gt;post on his blog&lt;/a&gt; Matt Cutts asks:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I almost wanted to call this post &amp;#8220;Stupid Google Tricks&amp;#8221; :-) What fun diagrams can you imagine making with the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google Charts Service&lt;/a&gt;?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here&amp;#8217;s a stupid trick: you can use the &lt;a href=&quot;http://www.pythonware.com/library/pil/handbook/&quot;&gt;Python Imaging Library&lt;/a&gt; to convert a picture into a URL which &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google charts&lt;/a&gt; will render as the original picture.&lt;/p&gt;
&lt;p&gt;Here&amp;#8217;s the original picture:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://wordaligned.org/images/buttons/spider-bw-61.png&quot; alt=&quot;Spider&quot;/&gt;&lt;/p&gt;
&lt;p&gt;here&amp;#8217;s the version served up by Google charts:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://chart.apis.google.com/chart?cht=s&amp;amp;chd=s:DDEEEEEEEEEEEEEFFFFFFFFFFFFFFGGGGGGGGGGGGHHHHHHHHHHHHHHIIIIIIIIIIIIIIIIIJJJJJJJJJJJJJJJKKKKKKKKKKLLLLLLLMMMMMMMMNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQRRRRRRRRRRRRRRRRRRRSSSSSSSSSSSSSSSSSSSSTTTTTTTTTTTTTTTTTTUUUUUUUUUUUUUUUUUVVVVVVVVVVVVVVVVVWWWWWWWWWWWWWWWWWWWWWXXXXXXXXXXXXXXXXXXXXXXXXYYYYYYYYYYYYYYYYYYYYYYYYYYZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccddddddddddddddddddddeeeeeeeeeeeeeeeeeeeeeeeefffffffffffffffffffgggggggggggggggghhhhhhhhhhhhhhhhhhhhiiiiiiiiiiiiiiiiiiiiijjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkklllllllllllllllllllmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnnnnnnnnnnnnoooooooooooooooooppppppppppppppppppqqqqqqqqqqqqqqqqqqqqrrrrrrrrrrrrrrrrrssssssssssssssssssssttttttttttttttttuuuuuuuuuuuuuuuuvvvvvvvvvvvvvwwwwwwwxxxxxxxyyyyyyyyzzzzzzzzzzzzzzz00000000000000111111111111111122222222222222333333333333444444444555556666777,YWaZYXWVUTSRQPObaZYXWVUTSRQPOsdcbaZUTSRQPutsrqplkjidcbavutsrqponmlkjiedcwvuqponmlkjihdcxwvonjihdcxwjihdcyxjihdcRzjihdcTSRQPNJHihgdcbaZYUTSRQPONMLKJIHGFtsrjihgfedcbaZYXWVUTSONMLKJIHGFEDvutsrqihgfedcbaZYXWVUTKIHGFEDCvutqpmlihgfedcWVUTSwvponmlkjihgfedVUTSRvqponmlkjihedcTSRQrqponmlkjihedSRQPsrqponmlkjedRQPOLysrqponmlkjdcRQPONMLKyxtsrqponmlkdcSRQPONMLKJyxtsrqponmldcbUTSRQPONMLKJyxtsrqponmlihgfedcbaZWVUTSPONMKJIyxwtsrqponmljihgfedcbaZYXWVUTPONJIHxwvutsrqponmkjihgfedcbaZYXWVUONMJIHGvusrqponmlkjifedcbZXONIHGFsrqponmlkjedcONMHGFE65432rqponmlkjedcONMGFED3210qponmlkjiedcONE10nmlkjigfedPONM0zonmlkjihgfedYXVPON0zonmjihgfeZYXWVUTPON0zqponmlihgfaZYXWVUTSRQPO0zyrqpnmlbaZYVUTSRQPOzytsrqpmlkcbaZTSRQPzyxwvutsrqmlkjcbaTSRQyxwvutsnmlkjicbUTSRQponmlkjihdcbWVUTSqponjihgdcbZYXWVUTrqponjihgfedcbaZYXWVsrqpjihgfedcbaZYXsrqjifedcbaZYXTSRQPOsrkjYXWVUTSRQPONsrkjYXWVUTSQPONMsrqkjXWVUONMLsrqkjihsrqkjihsrqjihgVsrqihgfZYXWVUTSsrqhgfeaZYXWVUsrqpogfedcbaZYXWsrqponfedcbaZYrqponmedcbaZonmlkedcbmlkdclkjijih&amp;amp;chm=s,000000,1,2.0,3.0,0&amp;amp;chs=186x186&quot; alt=&quot;Google Chart Spider&quot;/&gt;&lt;/p&gt;
&lt;p&gt;here&amp;#8217;s the code:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;import Image
import string

def scatter_pixels(img_file):
    &quot;&quot;&quot;Return the URL of a scatter plot of the supplied image

    The image will be rendered square and black on white. Adapt the
    code if you want something else.
    &quot;&quot;&quot;
    # Use simple chart encoding. To make things really simple
    # use a square image where each X or Y position corresponds
    # to a single encode value.
    simple = string.uppercase + string.lowercase + string.digits
    rsimple = simple[::-1] # Google charts Y reverses PIL Y
    w = len(simple)
    W = w * 3
    img = Image.open(img_file).resize((w, w)).convert(&quot;1&quot;)
    pels = img.load()
    black_pels = [(x, y) for x in range(w) for y in range(w)
                  if pels[x, y] == 0]
    xs = &quot;&quot;.join(simple[x] for x, _ in black_pels)
    ys = &quot;&quot;.join(rsimple[y] for _, y in black_pels)
    sqside = 3.0
    return (
        &quot;http://chart.apis.google.com/chart?&quot;
        &quot;cht=s&amp;amp;&quot;                          # Draw a scatter graph
        &quot;chd=s:%(xs)s,%(ys)s&amp;amp;&quot;            # using simple encoding and
        &quot;chm=s,000000,1,2.0,%(sqside)r,0&amp;amp;&quot;# square black markers
        &quot;chs=%(W)rx%(W)r&quot;                 # at this size.
        ) % locals()

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;and here&amp;#8217;s the url it generates:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://chart.apis.google.com/chart?cht=s&amp;amp;chd=s:DDEEEEEEEEEEEEEFFFFFFFFFFFFFFGGGGGGGGGGGGHHHHHHHHHHHHHHIIIIIIIIIIIIIIIIIJJJJJJJJJJJJJJJKKKKKKKKKKLLLLLLLMMMMMMMMNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQRRRRRRRRRRRRRRRRRRRSSSSSSSSSSSSSSSSSSSSTTTTTTTTTTTTTTTTTTUUUUUUUUUUUUUUUUUVVVVVVVVVVVVVVVVVWWWWWWWWWWWWWWWWWWWWWXXXXXXXXXXXXXXXXXXXXXXXXYYYYYYYYYYYYYYYYYYYYYYYYYYZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccddddddddddddddddddddeeeeeeeeeeeeeeeeeeeeeeeefffffffffffffffffffgggggggggggggggghhhhhhhhhhhhhhhhhhhhiiiiiiiiiiiiiiiiiiiiijjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkklllllllllllllllllllmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnnnnnnnnnnnnoooooooooooooooooppppppppppppppppppqqqqqqqqqqqqqqqqqqqqrrrrrrrrrrrrrrrrrssssssssssssssssssssttttttttttttttttuuuuuuuuuuuuuuuuvvvvvvvvvvvvvwwwwwwwxxxxxxxyyyyyyyyzzzzzzzzzzzzzzz00000000000000111111111111111122222222222222333333333333444444444555556666777,YWaZYXWVUTSRQPObaZYXWVUTSRQPOsdcbaZUTSRQPutsrqplkjidcbavutsrqponmlkjiedcwvuqponmlkjihdcxwvonjihdcxwjihdcyxjihdcRzjihdcTSRQPNJHihgdcbaZYUTSRQPONMLKJIHGFtsrjihgfedcbaZYXWVUTSONMLKJIHGFEDvutsrqihgfedcbaZYXWVUTKIHGFEDCvutqpmlihgfedcWVUTSwvponmlkjihgfedVUTSRvqponmlkjihedcTSRQrqponmlkjihedSRQPsrqponmlkjedRQPOLysrqponmlkjdcRQPONMLKyxtsrqponmlkdcSRQPONMLKJyxtsrqponmldcbUTSRQPONMLKJyxtsrqponmlihgfedcbaZWVUTSPONMKJIyxwtsrqponmljihgfedcbaZYXWVUTPONJIHxwvutsrqponmkjihgfedcbaZYXWVUONMJIHGvusrqponmlkjifedcbZXONIHGFsrqponmlkjedcONMHGFE65432rqponmlkjedcONMGFED3210qponmlkjiedcONE10nmlkjigfedPONM0zonmlkjihgfedYXVPON0zonmjihgfeZYXWVUTPON0zqponmlihgfaZYXWVUTSRQPO0zyrqpnmlbaZYVUTSRQPOzytsrqpmlkcbaZTSRQPzyxwvutsrqmlkjcbaTSRQyxwvutsnmlkjicbUTSRQponmlkjihdcbWVUTSqponjihgdcbZYXWVUTrqponjihgfedcbaZYXWVsrqpjihgfedcbaZYXsrqjifedcbaZYXTSRQPOsrkjYXWVUTSRQPONsrkjYXWVUTSQPONMsrqkjXWVUONMLsrqkjihsrqkjihsrqjihgVsrqihgfZYXWVUTSsrqhgfeaZYXWVUsrqpogfedcbaZYXWsrqponfedcbaZYrqponmedcbaZonmlkedcbmlkdclkjijih&amp;amp;chm=s,000000,1,2.0,3.0,0&amp;amp;chs=186x186&quot;&gt;http://chart.apis.google.com/chart?cht=s&amp;amp;chd=s:DDEEEEEEE&amp;#8230;&amp;amp;chs=186x186&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p style=&quot;font-size:75%&quot;&gt;&lt;strong&gt;Smallprint&lt;/strong&gt;. Google charts may return a 400 error for an image with a long URL (meaning lots of black pixels in this case). The upper limit on URL length doesn&amp;#8217;t seem to be &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;documented&lt;/a&gt; but a quick &lt;a href=&quot;http://groups.google.com/group/google-chart-api/search?group=google-chart-api&amp;amp;q=url+length&amp;amp;qt_g=Search+this+group&quot;&gt;trawl through topics on the google charts group&lt;/a&gt; suggests others have bumped into it too. Connoisseurs of whacky pictures should pay &lt;a href=&quot;http://www.romancortes.com/blog/homer-css/&quot;&gt;CSS Homer Simpson&lt;/a&gt; a visit.&lt;/p&gt;</description>
<dc:date>2008-04-25</dc:date>
<guid>http://wordaligned.org/articles/scatter-pictures-with-google-charts</guid>
<author>tag@wordaligned.org (Thomas Guest)</author>
<link>http://wordaligned.org/articles/scatter-pictures-with-google-charts</link>
<category>Charts</category>
</item>

<item>
<title>Drawing Chessboards</title>
<description>&lt;p&gt;I wanted a picture of a chessboard. Rather than boot up some drawing software and cut and paste black and white squares I decided to write a program to create the picture.&lt;/p&gt;
&lt;p&gt;If you&amp;#8217;d like to know &lt;strong&gt;why&lt;/strong&gt; anyone would ever create work for themselves in this way, skip to the end of this article, where you&amp;#8217;ll find justification and a more challenging &lt;a href=&quot;http://wordaligned.org/articles/drawing-chessboards.html#why&quot;&gt;follow-on problem&lt;/a&gt;. Otherwise, please read on from top to bottom in the usual way.&lt;/p&gt;
&lt;h3 id=&quot;the-python-imaging-library&quot;&gt;The Python Imaging Library&lt;/h3&gt;
&lt;p&gt;&lt;img style=&quot;border-style:double;&quot; src=&quot;http://wordaligned.org/images/chessboard-pil.png&quot; alt=&quot;Chessboard created by PIL&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Fredrik Lundh&amp;#8217;s &lt;a href=&quot;http://effbot.org/imagingbook/pil-index.htm&quot;&gt;Python Imaging Library&lt;/a&gt; (commonly known as &lt;a href=&quot;http://effbot.org/imagingbook/pil-index.htm&quot;&gt;PIL&lt;/a&gt;) must surely rank as one of the most popular Python libraries which doesn&amp;#8217;t come as standard&lt;sup&gt;&lt;a id=&quot;fn1link&quot; href=&quot;http://wordaligned.org/articles/drawing-chessboards.html#fn1&quot;&gt;&lt;a href=&quot;https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/&quot;&gt;1&lt;/a&gt;&lt;/a&gt;&lt;/sup&gt;. It&amp;#8217;s a fabulous tool which I&amp;#8217;ve used to create the graphic above (though note that the double border around this graphic and subsequent ones is applied by a CSS style property). Here&amp;#8217;s how.
&lt;span id=&quot;continue-reading&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;PIL chessboard&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def draw_chessboard(n=8, pixel_width=200):
    &quot;Draw an n x n chessboard using PIL.&quot;
    import Image, ImageDraw
    from itertools import cycle
    def sq_start(i):
        &quot;Return the x/y start coord of the square at column/row i.&quot;
        return i * pixel_width / n

    def square(i, j):
        &quot;Return the square corners, suitable for use in PIL drawings&quot; 
        return map(sq_start, [i, j, i + 1, j + 1])

    image = Image.new(&quot;L&quot;, (pixel_width, pixel_width))
    draw_square = ImageDraw.Draw(image).rectangle
    squares = (square(i, j)
               for i_start, j in zip(cycle((0, 1)), range(n))
               for i in range(i_start, n, 2))
    for sq in squares:
        draw_square(sq, fill=&amp;#x27;white&amp;#x27;)
    image.save(&quot;chessboard-pil.png&quot;)

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Note:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We don&amp;#8217;t draw any black squares, instead relying on the default image background being black.&lt;/li&gt;
&lt;li&gt;The &amp;#8220;L&amp;#8221; image type (Luminance?) specifies a greyscale image.&lt;/li&gt;
&lt;li&gt;PIL adopts the usual raster graphics convention, of the origin being in the top-left corner.&lt;/li&gt;
&lt;li&gt;As we progress &lt;strong&gt;down&lt;/strong&gt; the board row by row, the first white square alternates between being the first and second square of each row. &lt;code&gt;Itertools.cycle((0, 1))&lt;/code&gt; achieves this nicely. &lt;/li&gt;
&lt;li&gt;A regular 8 x 8 chessboard will, then, have a black square at the bottom left, which is the usual convention. For odd values of n the bottom-left square would be white.&lt;/li&gt;
&lt;li&gt;There may be rounding problems with this code if the supplied pixel width isn&amp;#8217;t an integral multiple of &lt;code&gt;n&lt;/code&gt;. It&amp;#8217;s probably better to guarantee the image size, rather than round down the board size.&lt;/li&gt;
&lt;li&gt;It would be better to parametrise the output file name, or even return the created image to clients. For now, we&amp;#8217;ll just save to a fixed-name PNG.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;imagemagick&quot;&gt;ImageMagick&lt;/h3&gt;
&lt;p&gt;PIL is a general purpose image processing library and it takes a little head-scratching and maths before we can even create something as simple as a chessboard. &lt;a href=&quot;http://www.imagemagick.org/script/index.php&quot;&gt;ImageMagick&lt;/a&gt; provides tools to perform a similar job from the command-line, making the chessboard a one-liner.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;ImageMagick chessboard&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;$ N=8
$ PIXEL_WIDTH=200
$ convert -size $((N*15))x$((N*15)) pattern:checkerboard \
  -monochrome -resize $PIXEL_WIDTH chessboard-magick.png 

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;img style=&quot;border-style:double;float:right;margin-left:4px;&quot; src=&quot;http://wordaligned.org/images/chessboard-magick.png&quot; alt=&quot;Chessboard created by ImageMagick&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Here, the checkerboard pattern is an ImageMagick built-in which, inspecting its output, happens to generate 15x15 squares (hence the 15&amp;#8217;s in the script above). The &lt;code&gt;-monochrome&lt;/code&gt; filter renders the pattern in black and white, rather than its native light- on dark-grey. The &lt;code&gt;-size&lt;/code&gt; and &lt;code&gt;-resize&lt;/code&gt; parameters should need no further explanation. The ((double parentheses)) perform Bash shell arithmetic.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.imagemagick.org/script/index.php&quot;&gt;ImageMagick&lt;/a&gt; masquerades as a shell tool but really it&amp;#8217;s a powerful and fully featured programmer&amp;#8217;s imaging tool &amp;#8212; a bit like a command-line version of &lt;a href=&quot;http://www.gimp.org&quot;&gt;Gimp&lt;/a&gt;&lt;a id=&quot;fn2link&quot; href=&quot;http://wordaligned.org/articles/drawing-chessboards#fn2&quot;&gt;&lt;sup&gt;&lt;a href=&quot;http://devcenter.wercker.com/docs/quickstarts/advanced/building-minimal-containers-with-go&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/a&gt;. Although well documented, my gut reaction is that it pushes the command-line interface too far. For more advanced image mangling, you&amp;#8217;ll probably need a program to generate the one-liner needed to drive &lt;code&gt;convert&lt;/code&gt;. Despite this reservation, it does the simple things simply, and it can do complex things too. Recommended!&lt;/p&gt;
&lt;h3 id=&quot;google-chart-api&quot;&gt;Google Chart API&lt;/h3&gt;
&lt;p&gt;For a bit of fun, we can persuade Google to render the chessboard for us &amp;#8212; in this case as a scatter plot using a square black markers&lt;a id=&quot;fn3link&quot; href=&quot;http://wordaligned.org/articles/drawing-chessboards#fn3&quot;&gt;&lt;sup&gt;[3]&lt;/sup&gt;&lt;/a&gt;. We flip the PIL processing around, drawing black squares on the (default) white background, and using the usual plotting convention which places the origin at the bottom left.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;Google chart chessboard&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def chessboard_url(n=8, pixel_width=200):
    &quot;Returns the URL of a chessboard graphic.&quot;
    def sq_midpt(i):
        &quot;Return the x/y midpt of a square in column/row i.&quot;
        # For text encoding, the graphic&amp;#x27;s logical width is 100
        return (0.5 + i) * 100. / n

    xys = [(sq_midpt(i), sq_midpt(j))
           for i_start, j in zip(cycle((0, 1)), range(n))
           for i in range(i_start, n, 2)]
    fields = dict(width=pixel_width, sqside=pixel_width/n,
                  xs=&quot;,&quot;.join(&quot;%.02f&quot; % x for x, _ in xys),
                  ys=&quot;,&quot;.join(&quot;%.02f&quot; % y for _, y in xys))
    return (
        &quot;http://chart.apis.google.com/chart?&quot;
        &quot;cht=s&amp;amp;&quot;                        # Draw a scatter graph
        &quot;chd=t:%(xs)s|%(ys)s&amp;amp;&quot;          # using text encoding and
        &quot;chm=s,000000,1,2.0,%(sqside)r&amp;amp;&quot;# square black markers
        &quot;chs=%(width)rx%(width)r&quot;       # at this size.
        ) % fields

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Note that we plot our chart on a logical 100 x 100 rectangle, the coordinate space mandated by the encoding we&amp;#8217;ve chosen, then resize it to the physical dimensions supplied by the client.&lt;/p&gt;
&lt;p&gt;This function actually returns the URL of a PNG which the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google chart API&lt;/a&gt; serves up. Paste this URL into your browser address bar to see the graphic, or curl it to a local file.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://chart.apis.google.com/chart?cht=s&amp;amp;chd=t:6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75,6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75,6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75,6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75|6.25,6.25,6.25,6.25,18.75,18.75,18.75,18.75,31.25,31.25,31.25,31.25,43.75,43.75,43.75,43.75,56.25,56.25,56.25,56.25,68.75,68.75,68.75,68.75,81.25,81.25,81.25,81.25,93.75,93.75,93.75,93.75&amp;amp;chm=s,000000,1,2.0,25.0&amp;amp;chs=200x200&quot;&gt;http://chart.apis.google.com/chart?cht=s&amp;amp;chd=t:6.25,31.25&amp;#8230;&amp;amp;chs=200x200&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;$ url=`python chessboard_url.py`
$ curl $url &amp;gt; chessboard.png

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;We could embed the image into HTML using the IMG element, which is how I&amp;#8217;ve embedded the image which you should see below.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;&amp;gt;&amp;gt;&amp;gt; from cgi import escape
&amp;gt;&amp;gt;&amp;gt; img = &amp;#x27;&amp;lt;img src=&quot;%s&quot; alt=&quot;chessboard graphic&quot;/&amp;gt;&amp;#x27;
&amp;gt;&amp;gt;&amp;gt; img % escape(chessboard_url())

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://chart.apis.google.com/chart?cht=s&amp;amp;chd=t:6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75,6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75,6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75,6.25,31.25,56.25,81.25,18.75,43.75,68.75,93.75|6.25,6.25,6.25,6.25,18.75,18.75,18.75,18.75,31.25,31.25,31.25,31.25,43.75,43.75,43.75,43.75,56.25,56.25,56.25,56.25,68.75,68.75,68.75,68.75,81.25,81.25,81.25,81.25,93.75,93.75,93.75,93.75&amp;amp;chm=s,000000,1,2.0,25.0&amp;amp;chs=200x200&quot; alt=&quot;Chessboard chart&quot; style=&quot;float:right;border-style:double;margin-left:4px;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;As you can see, we have plenty of options, but unfortunately the image itself isn&amp;#8217;t suitable. You can&amp;#8217;t get rid of the axes &amp;#8212; or at least, I haven&amp;#8217;t found a way to &amp;#8212; and the rendered chart has some padding to the top and the right. And worse, we&amp;#8217;re pretty much at the end of the line for this hack: if we wanted to do something more interesting, such as place pieces on the board, we&amp;#8217;re out of luck. &lt;/p&gt;
&lt;p&gt;Of course this isn&amp;#8217;t a flaw in the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google Chart API&lt;/a&gt;: we&amp;#8217;ve actually asked it to draw a scatter plot of the centres of black squares on a chessboard, using square black markers, a job it&amp;#8217;s done well enough. Some examples showing the proper use of Google charts can be found in an &lt;a href=&quot;http://wordaligned.org/articles/the-maximum-subsequence-problem.html&quot;&gt;article I wrote about maximum sum subsequences&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;ascii-text&quot;&gt;ASCII Text&lt;/h3&gt;
&lt;p&gt;The chart URL might be considered a text encoding of the image; the actual graphic is returned by a server. There are other, more direct, textual representations.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;ASCII art chessboard&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def outer_join(sep, ss):
    &quot;&quot;&quot;Like string.join, but encloses the result with outer separators.

    Example:
    &amp;gt;&amp;gt;&amp;gt; outer_join(&amp;#x27;|&amp;#x27;, [&amp;#x27;1&amp;#x27;, &amp;#x27;2&amp;#x27;, &amp;#x27;3&amp;#x27;])
    &amp;#x27;|1|2|3|&amp;#x27;
    &quot;&quot;&quot;
    return &quot;%s%s%s&quot; % (sep, sep.join(ss), sep)

def ascii_chessboard(n=8):
    &quot;&quot;&quot;Draws an ASCII art chessboard.

    Returns a string representation of an n x n board.
    &quot;&quot;&quot;
    from itertools import islice, cycle
    divider = outer_join(&quot;+&quot;, &quot;-&quot; * n) + &quot;\n&quot;
    row0 = outer_join(&quot;|&quot;, islice(cycle(&quot; B&quot;), n)) + &quot;\n&quot;
    row1 = outer_join(&quot;|&quot;, islice(cycle(&quot;B &quot;), n)) + &quot;\n&quot;
    return outer_join(divider, islice(cycle([row0, row1]), n))

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;I suspect this code was easier for me to write than it is for you to read! It treats the chessboard as a sequence of alternating rows of alternating squares, which are then joined together for output.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print ascii_chessboard(8)
+-+-+-+-+-+-+-+-+
| |B| |B| |B| |B|
+-+-+-+-+-+-+-+-+
|B| |B| |B| |B| |
+-+-+-+-+-+-+-+-+
| |B| |B| |B| |B|
+-+-+-+-+-+-+-+-+
|B| |B| |B| |B| |
+-+-+-+-+-+-+-+-+
| |B| |B| |B| |B|
+-+-+-+-+-+-+-+-+
|B| |B| |B| |B| |
+-+-+-+-+-+-+-+-+
| |B| |B| |B| |B|
+-+-+-+-+-+-+-+-+
|B| |B| |B| |B| |
+-+-+-+-+-+-+-+-+

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Not pretty, but such graphics may be useful in source code, which is typically viewed in a plain-text editor, and where ASCII art provides a way of embedding pictures right where they&amp;#8217;re needed. &lt;/p&gt;
&lt;p&gt;On which point: if you&amp;#8217;re working through &amp;#8220;Structure and Interpretation of Computer Programs&amp;#8221; you may like to know the book is &lt;a href=&quot;http://www.neilvandyke.org/sicp-texi/&quot;&gt;available in Texinfo format&lt;/a&gt;, with the pictures all rendered in ASCII art. So you can split your editor window and run the code on one side, while browsing the book on the other. Here&amp;#8217;s one of the figures:&lt;/p&gt;
&lt;pre&gt;
*Figure 4.6:* The `or&#x27; combination of two queries is produced by
operating on the stream of frames in parallel and merging the
results.

            +---------------------------+
            |          (or A B)         |
            |    +---+                  |
 input      | +-&amp;gt;| A |------------+     |  output
 stream of  | |  +---+            V     |  stream of
 frames     | |    ^          +-------+ |  frames
 -------------*    |          | merge +---------------&amp;gt;
            | |    |          +-------+ |
            | |    |              ^     |
            | |    |   +---+      |     |
            | +-------&amp;gt;| B +------+     |
            |      |   +---+            |
            |      |     ^              |
            |      |     |              |
            |      +--*--+              |
            +---------|-----------------+
                      |
                  data base
&lt;/pre&gt;

&lt;p&gt;Even though I own a copy of the book and the &lt;a href=&quot;http://mitpress.mit.edu/sicp/full-text/book/book.html&quot;&gt;full text is available on-line&lt;/a&gt;, this primitive info version has become my preferred format when actually running the code examples and exercises.&lt;/p&gt;
&lt;h3 id=&quot;unicode-block-elements&quot;&gt;Unicode Block Elements&lt;/h3&gt;
&lt;p&gt;Most programming languages may be &lt;a href=&quot;http://wordaligned.org/articles/a-yen-for-more-symbols.html&quot;&gt;stuck in ASCII&lt;/a&gt;, but we needn&amp;#8217;t restict ourselves in this way. I found some block elements in the &lt;a href=&quot;http://www.unicode.org/charts/symbols.html&quot;&gt;Geometrical Symbols&lt;/a&gt; section of the Unicode code charts (&lt;a href=&quot;http://www.unicode.org/charts/PDF/U2580.pdf&quot;&gt;Unicode Block Elements (PDF)&lt;/a&gt;). Here&amp;#8217;s a pre-rendered block of text composed of the light and dark shade block characters, U+2591 LIGHT SHADE and U+2593 DARK SHADE.&lt;/p&gt;
&lt;pre&gt;
&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;
&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;
&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;
&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;
&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;
&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;
&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;
&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;&amp;#x2593;&amp;#x2591;
&lt;/pre&gt;

&lt;h3 id=&quot;and-more&quot;&gt;And more&lt;/h3&gt;
&lt;p&gt;I can think of plenty of other ways to draw a chessboard. My favourite &lt;a href=&quot;http://wordaligned.org/articles/drawing-software-design.htmls&quot;&gt;drawing&lt;/a&gt; environments are the &lt;a href=&quot;http://blogoscoped.com/archive/2008-02-11-n78.html&quot;&gt;pencil and paper&lt;/a&gt;, and the pen and whiteboard; combine the former with a scanner and the latter with a digital camera and you&amp;#8217;ve got an easy route to an electronic version of your design.&lt;/p&gt;
&lt;p&gt;For an HTML document I suspect &lt;a href=&quot;http://www.w3.org/Graphics/SVG/&quot;&gt;SVG&lt;/a&gt; would be a good choice, but I don&amp;#8217;t know enough about SVG to state this with confidence. I bet you could go a long way with &lt;a href=&quot;http://www.w3.org/Style/CSS/&quot;&gt;CSS&lt;/a&gt; too. &lt;a href=&quot;http://en.wikipedia.org/wiki/Chessboard&quot;&gt;Wikipedia&amp;#8217;s chess board&lt;/a&gt; is a table built on top of two small images, a light and a dark square, which I guess saves on bandwidth.&lt;/p&gt;
&lt;h3 id=&quot;why&quot;&gt;Why?&lt;/h3&gt;
&lt;p&gt;Why ever bother programming when all we want is a simple graphic?&lt;/p&gt;
&lt;p&gt;Well, for one thing, there&amp;#8217;s not &lt;strong&gt;that&lt;/strong&gt; much programming. The actual work of pushing pixels around is done by &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google&lt;/a&gt;, or &lt;a href=&quot;http://effbot.org/imagingbook/pil-index.htm&quot;&gt;PIL&lt;/a&gt;, or &lt;a href=&quot;http://www.imagemagick.org/script/index.php&quot;&gt;ImageMagick&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Once we&amp;#8217;ve got a program written, it should be easy to adapt it. We&amp;#8217;ve already put in hooks to specify the number of squares and the image dimensions. It&amp;#8217;s equally easy to, for example, write out a JPEG rather than a PNG, or use different colours.&lt;/p&gt;
&lt;p&gt;A programmatic solution is dynamic. Google&amp;#8217;s chart API generates pictures on the fly, based on data points, ranges etc. which clients choose as and when. It&amp;#8217;s rather  like lazy-evaluation: pre-rendering all possibilities isn&amp;#8217;t just expensive, it&amp;#8217;s out of the question.&lt;/p&gt;
&lt;h3 id=&quot;teaser&quot;&gt;Teaser&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://tbn0.google.com/images?q=tbn:AmRSkxMo-1W5iM:http://web.usna.navy.mil/~wdj/images_chess/chess011.gif&quot; alt=&quot;Lurid chessboard&quot; style=&quot;float:right;margin-left:4px;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;That&amp;#8217;s quite enough pixels and characters for now, so this article will have to appear in two parts. If I&amp;#8217;ve still not convinced you of the merits of creating images programmatically, please consider the following puzzle.&lt;/p&gt;
&lt;p&gt;&lt;span /&gt;How would you draw a position reached in a game of chess, showing both the board and the pieces?&lt;/p&gt;
&lt;p&gt;And if I &lt;strong&gt;have&lt;/strong&gt; convinced you, this exercise makes for a good workout.&lt;/p&gt;
&lt;p&gt;Some Q&amp;amp;A&amp;#8217;s.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Q&lt;/strong&gt;: What position, exactly?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A&lt;/strong&gt;: Any!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Q&lt;/strong&gt;: How will the position be described?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A&lt;/strong&gt;: Your choice &amp;#8212; it&amp;#8217;s an interesting part of the puzzle.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A great starting point would be to solve the puzzle using an ASCII art representation.&lt;/p&gt;
&lt;p&gt;You can find my solution in &lt;a href=&quot;http://wordaligned.org/articles/drawing-chess-positions.html&quot;&gt;this follow-up article&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;thanks&quot;&gt;Thanks&lt;/h3&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;http://gedmin.as&quot;&gt;Marius Gedminas&lt;/a&gt; and Johannes Hoff for their help bug-fixing this article.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;a id=&quot;fn1&quot; href=&quot;http://wordaligned.org/articles/drawing-chessboards#fn1link&quot;&gt;&lt;a href=&quot;https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/&quot;&gt;1&lt;/a&gt;&lt;/a&gt;
I&amp;#8217;m confused about where exactly PIL belongs; the official homepage seems to be on the PythonWare website (&lt;a href=&quot;http://www.pythonware.com/library/pil/handbook/&quot;&gt;http://www.pythonware.com/library/pil/handbook/&lt;/a&gt;), but I usually head for the Effbot site, &lt;a href=&quot;http://effbot.org/imagingbook/&quot;&gt;http://effbot.org/imagingbook/&lt;/a&gt;. I think the sites mirror the same information, so it boils down to whether you prefer a blue or green theme, and how off-putting you find all the ads-by-google.&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;fn2&quot; href=&quot;http://wordaligned.org/articles/drawing-chessboards#fn2link&quot;&gt;&lt;a href=&quot;http://devcenter.wercker.com/docs/quickstarts/advanced/building-minimal-containers-with-go&quot;&gt;2&lt;/a&gt;&lt;/a&gt;
Actually, you can use &lt;a href=&quot;http://www.gimp.org/tutorials/Basic_Batch/&quot;&gt;Gimp from the command-line&lt;/a&gt;, and it comes with some tools for creating and editing batch files, and indeed for creating a personal suite of image processing scripts. I&amp;#8217;ve never used &lt;a href=&quot;http://www.gimp.org&quot;&gt;Gimp&lt;/a&gt; in this way, so I can&amp;#8217;t say much more about this.&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;fn3&quot; href=&quot;http://wordaligned.org/articles/drawing-chessboards#fn3link&quot;&gt;[3]&lt;/a&gt;
In theory you could use the Google Chart API to render any image in a pointillist manner: just plot enough pixels in the right places.&lt;/p&gt;</description>
<dc:date>2008-03-18</dc:date>
<guid>http://wordaligned.org/articles/drawing-chessboards</guid>
<author>tag@wordaligned.org (Thomas Guest)</author>
<link>http://wordaligned.org/articles/drawing-chessboards</link>
<category>Charts</category>
</item>

<item>
<title>The Maximum Sum contiguous subsequence problem</title>
<description>&lt;h3 id=&quot;welcome-to-the-pearly-gates&quot;&gt;Welcome to the Pearly Gates&lt;/h3&gt;
&lt;p&gt;The Pearly Gates club never closes. Its public entrance, a revolving door, just keeps on spinning. With each rotation some punters enter and others leave. The club&amp;#8217;s owners would like to track this traffic. Specifically, they&amp;#8217;d like to know the maximum increase in people entering the club over a given period.&lt;/p&gt;
&lt;p&gt;The starting point is to track the people who enter/leave with each spin of the door. Here&amp;#8217;s a 5 minute sample of that information. Negative numbers mean more people left than entered during a particular cycle.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;Entries Log&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;0 1 2 -3 3 -1 0 -4 0 -1 -4 2 4 1 1 3 1 0 -2 -3 -3 -2 3 1 1 4 5 -3 -2 -1 ...

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Here&amp;#8217;s the same information plotted on a graph.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Graph of entries to Pearly Gates club&quot; src=&quot;http://chart.apis.google.com/chart?
cht=lc
&amp;amp;chtt=Entries+to+the+Pearly+Gates+club
&amp;amp;chs=500x200
&amp;amp;chxt=x,y
&amp;amp;chxl=0:|0min|1min|2min|3min|4min|5min
&amp;amp;chxr=1,-5.0,6.0
&amp;amp;chd=t:45.5,45.5|45.5,54.5,63.6,18.2,72.7,36.4,45.5,9.1,45.5,36.4,9.1,63.6,81.8,54.5,54.5,72.7,54.5,45.5,27.3,18.2,18.2,27.3,72.7,54.5,54.5,81.8,90.9,18.2,27.3,36.4
&amp;amp;chco=BBBBBB,0000CC
&amp;amp;chls=1,1,0|4,1,0
&quot; /&gt;&lt;/p&gt;
&lt;p&gt;The archetypal problem we&amp;#8217;d like to solve can be stated:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Given a sequence of numbers, find the maximum sum of a contiguous subsequence of those numbers.&lt;/strong&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As an example, the maximum sum contiguous subsequence of 0, -1, &lt;strong&gt;2, -1, 3&lt;/strong&gt;, -1, 0 would be 4 (= 2 + -1 + 3).&lt;/p&gt;
&lt;p&gt;This problem is generally known as &lt;strong&gt;the maximum sum contiguous subsequence problem&lt;/strong&gt; and if you haven&amp;#8217;t encountered it before, I&amp;#8217;d recommend trying to solve it before reading on. Even if you have encountered it before, I&amp;#8217;ll invite you to read on anyway &amp;#8212; it&amp;#8217;s well worth another look.&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;continue-reading&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;programming-pearl&quot;&gt;Programming Pearl&lt;/h3&gt;
&lt;p&gt;The maximum sum contiguous subsequence problem appears in Jon Bentley&amp;#8217;s &lt;a href=&quot;http://www.cs.bell-labs.com/cm/cs/pearls/&quot;&gt;&amp;#8220;Programming Pearls&amp;#8221;&lt;/a&gt;. He first presents a brute force solution which examines all possible contiguous subsequences of the initial sequence and returns the maximum sum of these subsequences.&lt;/p&gt;
&lt;p&gt;A Python implementation might read:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def generate_pairs(n):
    &quot;Generate all pairs (i, j) such that 0 &amp;lt;= i &amp;lt;= j &amp;lt; n&quot;
    for i in range(n):
        for j in range(i, n):
            yield i, j

def max_sum_subsequence(seq):
    &quot;Return the max-sum contiguous subsequence of the input sequence.&quot;
    return max(sum(seq[i:j])
               for i, j in generate_pairs(len(seq) + 1))

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;It&amp;#8217;s a straightforward piece of code, though note the &lt;code&gt;+ 1&lt;/code&gt; which ensures that we slice to the end of &lt;code&gt;seq&lt;/code&gt;, and also that we include empty slices, which sum to &lt;code&gt;0&lt;/code&gt;, handling the case when every item in the sequence is negative. The trouble is, the algorithm is of cubic complexity: to process just 6 hours of logged activity takes over 2 minutes on a 2GHz Intel Core Duo MacBook, and the cubic nature of the algorithm means we&amp;#8217;d quickly fail to process more substantial log files in real time.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Graph plotting accumulated entries to the Pearly Gates club&quot; src=&quot;http://chart.apis.google.com/chart?
cht=lc
&amp;amp;chtt=Accumulated+entries+to+the+Pearly+Gates+club
&amp;amp;chs=500x250
&amp;amp;chxt=x,y
&amp;amp;chxl=0:|0min|1min|2min|3min|4min|5min
&amp;amp;chxr=1,-8.0,10.0
&amp;amp;chd=t:44.4,50.0,55.6,27.8,61.1,38.9,44.4,22.2,44.4,38.9,22.2,55.6,66.7,50.0,50.0,61.1,50.0,44.4,33.3,27.8,27.8,33.3,61.1,50.0,50.0,66.7,72.2,27.8,33.3,38.9|44.4,50.0,61.1,44.4,61.1,55.6,55.6,33.3,33.3,27.8,5.6,16.7,38.9,44.4,50.0,66.7,72.2,72.2,61.1,44.4,27.8,16.7,33.3,38.9,44.4,66.7,94.4,77.8,66.7,61.1
&amp;amp;chco=CCCCCC,CC0000
&amp;amp;chls=3,1,0|3,1,0
&amp;amp;chdl=Entries|Accum.+Entries
&quot; /&gt;&lt;/p&gt;
&lt;p&gt;A simple optimisation eliminates the repeated calls to &lt;code&gt;sum&lt;/code&gt; by accumulating the input sequence &amp;#8212; the red line in the graph above. Subtracting element &lt;code&gt;i-1&lt;/code&gt; from element &lt;code&gt;j&lt;/code&gt; of this cumulative sequence gives us the sum of elements in the range i, j of the original sequence. We won&amp;#8217;t study the code for this quadratic solution &amp;#8212; it doesn&amp;#8217;t add much to our analysis. Again, some care is needed to avoid &lt;a href=&quot;http://wordaligned.org/articles/joined-output-and-the-fencepost-problem.html&quot;&gt;fencepost problems&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We won&amp;#8217;t look at the divide-and-conquer NlogN solution either. It&amp;#8217;s hard to understand, and we can do far better.&lt;/p&gt;
&lt;h3 id=&quot;linear-solution&quot;&gt;Linear Solution&lt;/h3&gt;
&lt;p&gt;There is a linear solution. The idea is to scan the sequence from start to finish keeping track of &lt;code&gt;maxsofar&lt;/code&gt;, the maximum sum of a contiguous subsequence seen so far, and &lt;code&gt;maxendinghere&lt;/code&gt;, the maximum sum of a contiguous subsequence which ends at the current position. Bentley&amp;#8217;s pseudo-code reads:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;maxsofar = 0
maxendinghere = 0
for i = [0, n)
    /* invariant: maxendinghere and maxsofar are accurate
       are accurate for x[0..i-1] */
    maxendinghere = max(maxendinghere + x[i], 0)
    maxsofar = max(maxsofar, maxendinghere)

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;This translates directly into Python.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def max_sum_subsequence(seq):
    maxsofar = 0
    maxendinghere = 0
    for s in seq:
        # invariant: maxendinghere and maxsofar are accurate
        # are accurate up to s
        maxendinghere = max(maxendinghere + s, 0)
        maxsofar = max(maxsofar, maxendinghere)
    return maxsofar

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Now, this is a fabulous solution. Bentley describes it as subtle. Such a succinct code snippet hardly &lt;strong&gt;looks&lt;/strong&gt; subtle, but I agree, the loop body &lt;strong&gt;does&lt;/strong&gt; take a bit of understanding:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;maxendinghere = max(maxendinghere + s, 0)
maxsofar = max(maxsofar, maxendinghere)

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Why does this work?&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;Well, essentially maxendinghere is what&amp;#8217;s accumulating the subsequences &amp;#8212; it keeps rolling the next element into itself. Should this accumulated sum ever become negative we know that the subsequence-which-ends-here we&amp;#8217;re currently tracking is worse than the empty subsequence-which-restarts-here; so we can reset our subsequence accumulator, and the first clause of the loop invariant still holds. Combine this with the observation that maxsofar tracks peaks in maxendinghere and we&amp;#8217;re done.&lt;/p&gt;
&lt;p&gt;The loop-invariant comment provides a good example of how comments can help us understand an algorithm, even though the code is minimal and the variable names are well-chosen.&lt;/p&gt;
&lt;h3 id=&quot;streaming-solution&quot;&gt;Streaming Solution&lt;/h3&gt;
&lt;p&gt;I prefer to think of this problem in terms of streams &amp;#8212; lazily evaluated sequences. Think of our log file as generating a stream of numbers:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;... 0 1 2 -3 3 -1 0 -4 0 -1 -4 2 4 1 1 3 1 0 -2 -3 -3 -2 3 1 1 4 5 -3 -2 -1 ...

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;The first thing we do is transform this stream to generate another stream, the cumulative sum of numbers seen so far. It&amp;#8217;s an integration of sorts. You&amp;#8217;ll remember we already used this stream, or an in-memory version of it, in our quadratic solution to the problem: the difference between points on it yields subsequence-sums.&lt;/p&gt;
&lt;h4 id=&quot;stream-accumulate&quot;&gt;Stream Accumulate&lt;/h4&gt;
&lt;p&gt;We generate the accumulated stream from our original stream like this:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def stream_accumulate(stream):
    total = 0
    for s in stream:
        total += s
        yield total

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;The graph below samples the first five minutes of this stream. The red line accumulates values from the pale grey line.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Graph plotting accumulated entries to the Pearly Gates club&quot; src=&quot;http://chart.apis.google.com/chart?
cht=lc
&amp;amp;chs=500x250
&amp;amp;chxt=x,y
&amp;amp;chxl=0:|0min|1min|2min|3min|4min|5min
&amp;amp;chxr=1,-8.0,10.0
&amp;amp;chd=t:44.4,50.0,55.6,27.8,61.1,38.9,44.4,22.2,44.4,38.9,22.2,55.6,66.7,50.0,50.0,61.1,50.0,44.4,33.3,27.8,27.8,33.3,61.1,50.0,50.0,66.7,72.2,27.8,33.3,38.9|44.4,50.0,61.1,44.4,61.1,55.6,55.6,33.3,33.3,27.8,5.6,16.7,38.9,44.4,50.0,66.7,72.2,72.2,61.1,44.4,27.8,16.7,33.3,38.9,44.4,66.7,94.4,77.8,66.7,61.1
&amp;amp;chm=x,FFCC33,1,10.0,20.0|x,FFCC33,1,26.0,20.0
&amp;amp;chco=CCCCCC,CC0000
&amp;amp;chls=3,1,0|3,1,0
&amp;amp;chdl=Entries|Accum.+Entries
&quot; /&gt;&lt;/p&gt;
&lt;p&gt;These accumulated numbers represent the number of members who have entered the club since we started tracking them. On our graph, the maximum sum contiguous subsequence is simply the greatest Y-increase between any two points on this graph. X&amp;#8217;s mark these points on the graph above. (Note: it&amp;#8217;s &lt;strong&gt;not&lt;/strong&gt; the Y-range of the graph we want since our X-values are time-ordered, and we require X1 &amp;lt;= X2). &lt;/p&gt;
&lt;h4 id=&quot;stream-floor&quot;&gt;Stream Floor&lt;/h4&gt;
&lt;p&gt;A second transformation yields the floor of the accumulated stream.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;import sys

def stream_floor(stream):
    m = 0
    for s in stream:
        m = min(m, s)
        yield m

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;(Note that, for our purposes, the floor of the stream isn&amp;#8217;t exactly the stream of minimum values taken by the stream &amp;#8212; we enforce a baseline at zero. It would be better to allow clients of this function to supply an optional baseline value, but I wanted the simplest possible code that shows the idea.)&lt;/p&gt;
&lt;p&gt;Here&amp;#8217;s a graph plotting the accumulated entries alongside the floor of these entries.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Graph plotting accumulated entries and floor of accumulated entries to the Pearly Gates club&quot; src=&quot;http://chart.apis.google.com/chart?
cht=lc
&amp;amp;chs=500x250
&amp;amp;chxt=x,y
&amp;amp;chxl=0:|0min|1min|2min|3min|4min|5min
&amp;amp;chxr=1,-8.0,10.0
&amp;amp;chd=t:44.4,50.0,61.1,44.4,61.1,55.6,55.6,33.3,33.3,27.8,5.6,16.7,38.9,44.4,50.0,66.7,72.2,72.2,61.1,44.4,27.8,16.7,33.3,38.9,44.4,66.7,94.4,77.8,66.7,61.1|44.4,44.4,44.4,44.4,44.4,44.4,44.4,33.3,33.3,27.8,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6,5.6
&amp;amp;chco=CC0000,333333
&amp;amp;chls=3,1,0|3,1,0
&amp;amp;chm=b,CCCCCC,0,1,0
&amp;amp;chdl=Accum.+Entries|Floor+Accum.+Entries
&quot; /&gt;&lt;/p&gt;
&lt;p&gt;We&amp;#8217;re very close to what we want now. We can track Y-increases on the graph just by generating the difference between the accumulated stream and its floor &amp;#8212; the shading on the graph.&lt;/p&gt;
&lt;h4 id=&quot;stream-diff&quot;&gt;Stream Diff&lt;/h4&gt;
&lt;p&gt;Here&amp;#8217;s an implementation of &lt;code&gt;stream_diff&lt;/code&gt;. We can&amp;#8217;t just plug a minus sign &amp;#8220;-&amp;#8221; into the mapping function, so we have to use the less wieldy &lt;code&gt;operator.sub&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;import itertools
import operator

def stream_diff(s, t):
    return itertools.imap(operator.sub, s, t)

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Alternatively, we could generate the new stream with an explicit loop:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;import itertools

def stream_diff(s, t):
    for ss, tt in itertools.izip(s, t):
        yield ss - tt

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;The final graph shows us the difference between the accumulated entry count and its floor. I&amp;#8217;ve also added the ceiling of this stream as a thick red line (I&amp;#8217;m sure you can figure out how to implement &lt;code&gt;stream_ceiling&lt;/code&gt;), and this ceiling represents the stream of maximum sum contiguous subsequences. &lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Graph plotting Max-ends-here and Max-so-far&quot; src=&quot;http://chart.apis.google.com/chart?
cht=lc
&amp;amp;chtt=Maximum+Subsequences+at+the+Pearly+Gates+club
&amp;amp;chs=500x250
&amp;amp;chxt=x,y
&amp;amp;chxl=0:|0min|1min|2min|3min|4min|5min
&amp;amp;chxr=1,0.0,17.0
&amp;amp;chd=t:0.0,5.9,17.6,17.6,17.6,17.6,17.6,17.6,17.6,17.6,17.6,17.6,35.3,41.2,47.1,64.7,70.6,70.6,70.6,70.6,70.6,70.6,70.6,70.6,70.6,70.6,94.1,94.1,94.1,94.1|0.0,5.9,17.6,0.0,17.6,11.8,11.8,0.0,0.0,0.0,0.0,11.8,35.3,41.2,47.1,64.7,70.6,70.6,58.8,41.2,23.5,11.8,29.4,35.3,41.2,64.7,94.1,76.5,64.7,58.8|0.0,0.0
&amp;amp;chco=aa0000,333333
&amp;amp;chls=4,1,0|2,1,0
&amp;amp;chm=b,CCCCCC,1,2,0
&amp;amp;chdl=Max-so-far|Max-ending-here
&quot; /&gt;&lt;/p&gt;
&lt;p&gt;We&amp;#8217;ve re-labelled the lines &lt;code&gt;Max-so-far&lt;/code&gt; and &lt;code&gt;Max-ending-here&lt;/code&gt; because they&amp;#8217;re the stream of values taken by the variables &lt;code&gt;maxsofar&lt;/code&gt; and &lt;code&gt;maxendinghere&lt;/code&gt; during Bentley&amp;#8217;s clever solution to the maximum sum contiguous subsequence problem. I think we&amp;#8217;re in a better position to understand how this solution works now.&lt;/p&gt;
&lt;h3 id=&quot;streams-and-collections&quot;&gt;Streams and Collections&lt;/h3&gt;
&lt;p&gt;Please don&amp;#8217;t imagine these streams are bloated. &lt;span /&gt;They may be infinite (remember the Pearly Gates club never closes!) but that doesn&amp;#8217;t mean they take up much space. The graphs shown represent snapshots of their activity, and at no point do our presented algorithms actually store a five minute buffer of entries.&lt;/p&gt;
&lt;p&gt;A final solution to the maximum sum contiguous subsequence problem reads like this. We&amp;#8217;ve pushed the general purpose stream transformation functions into a separate module, &lt;code&gt;stream.py&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;import itertools
import stream

def max_sum_subsequence_stream(ss):
    &quot;Return the stream of max sum contiguous subsequences of the input iterable.&quot;
    accu1, accu2 = itertools.tee(stream.accumulate(ss))
    return stream.ceil(stream.diff(accu1, 
                       stream.floor(accu2, baseline=0)))

def max_sum_subsequence(ss):
    &quot;Return the max sum of a contiguous subsequence of the input iterable.&quot;
    return stream.last(max_sum_subsequence_stream(ss))

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;The iterable supplied to &lt;code&gt;max_sum_subsequence&lt;/code&gt; has its last value read, and should therefore be bounded if we want the function to return. We haven&amp;#8217;t supplied arguments to extract a portion of this iterable (to generate maximum subsequences for the club on a particular day, for example) because that&amp;#8217;s what &lt;code&gt;itertools.islice&lt;/code&gt; is for.&lt;/p&gt;
&lt;p&gt;Note that &lt;code&gt;max_sum_subsequence_stream()&lt;/code&gt; may be more useful to clients than &lt;code&gt;max_sum_subsequence()&lt;/code&gt;. Suppose, for example, we&amp;#8217;re only interested when the maximum sum subsequence exceeds 100. We can do this directly by connecting &lt;code&gt;itertools.dropwhile()&lt;/code&gt; to our function.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;def max_subseq_exceeds(seq, limit=100):
    max_sub_s = max_sum_subsequence_stream(seq)
    return itertools.dropwhile(lambda s: s &amp;lt;= limit, max_sub_s)

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Perhaps we&amp;#8217;d like to know if the maximum sum subsequence reaches a plateau; that is, it stays on a level for a while.&lt;/p&gt;
&lt;p&gt;Here&amp;#8217;s the stream module.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;&lt;div class=&quot;codetitle&quot;&gt;stream.py&lt;/div&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;&quot;General purpose stream generation functions.&quot;
import itertools

def floor(stream, baseline=None):
    &quot;&quot;&quot;Generate the stream of minimum values from the input stream.

    The baseline, if supplied, is an upper limit for the floor.
    &amp;gt;&amp;gt;&amp;gt; ff = floor((1, 2, -2, 3))
    &amp;gt;&amp;gt;&amp;gt; assert list(ff) == [1, 1, -2, -2]
    &amp;gt;&amp;gt;&amp;gt; ff = floor((1, 2, -2, 3), 0)
    &amp;gt;&amp;gt;&amp;gt; assert list(ff) == [0, 0, -2, -2]    
    &quot;&quot;&quot;
    stream = iter(stream)
    m = baseline
    if m is None:
        try:
            m = stream.next()
            yield m
        except StopIteration:
            pass
    for s in stream:
        m = min(m, s)
        yield m

def ceil(stream):
    &quot;&quot;&quot;Generate the stream of maximum values from the input stream.

    &amp;gt;&amp;gt;&amp;gt; top = ceil([0, -1, 2, -2, 3])
    &amp;gt;&amp;gt;&amp;gt; assert list(top) == [0, 0, 2, 2, 3]
    &quot;&quot;&quot;
    stream = iter(stream)
    try:
        M = stream.next()
        yield M
    except StopIteration:
        pass
    for s in stream:
        M = max(M, s)
        yield M

def accumulate(stream):
    &quot;&quot;&quot;Generate partial sums from the stream.

    &amp;gt;&amp;gt;&amp;gt; accu = accumulate([1, 2, 3, 4])
    &amp;gt;&amp;gt;&amp;gt; assert list(accu) == [1, 3, 6, 10]
    &quot;&quot;&quot;
    total = 0
    for s in stream:
        total += s
        yield total

def diff(s, t):
    &quot;&quot;&quot;Generate the differences between two streams

    If the streams are of unequal length, the shorter is truncated.
    &amp;gt;&amp;gt;&amp;gt; dd = diff([2, 4, 6, 8], [1, 2, 3])
    &amp;gt;&amp;gt;&amp;gt; assert list(dd) == [1, 2, 3]
    &quot;&quot;&quot;
    import operator
    return itertools.imap(operator.sub, s, t)

def last(stream, default=None):
    &quot;&quot;&quot;Return the last item in the stream or the default if the stream is empty.

    &amp;gt;&amp;gt;&amp;gt; last(&amp;#x27;abc&amp;#x27;)
    &amp;#x27;c&amp;#x27;
    &amp;gt;&amp;gt;&amp;gt; last([], default=-1)
    -1
    &quot;&quot;&quot;
    s = default
    for s in stream:
        pass
    return s

if __name__ == &quot;__main__&quot;:
    import doctest
    doctest.testmod()

&lt;/pre&gt;

&lt;/div&gt;

&lt;h3 id=&quot;stream-on&quot;&gt;Stream on&amp;#8230;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;The maximum sum contiguous subsequence problem is described in &lt;a href=&quot;http://www.cs.bell-labs.com/cm/cs/pearls/&quot;&gt;&amp;#8220;Programming Pearls&amp;#8221;&lt;/a&gt; by Jon Bentley. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;My favourite introduction to computer programming, &amp;#8220;Structure and Interpretation of Computer Programs&amp;#8221;, has &lt;a href=&quot;http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5&quot;&gt;lots to say about streams&lt;/a&gt;, and suggests they have a role in concurrent programming and modelling time. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Streams are a natural fit with functional programming, and well supported by languages like &lt;a href=&quot;http://www.schemers.org&quot;&gt;Scheme&lt;/a&gt; and &lt;a href=&quot;http://haskell.org&quot;&gt;Haskell&lt;/a&gt;. Python also handles them nicely: look into &lt;a href=&quot;http://www.python.org/dev/peps/pep-0255/&quot;&gt;generators&lt;/a&gt;, &lt;a href=&quot;http://www.python.org/dev/peps/pep-0289/&quot;&gt;generator expressions&lt;/a&gt;, the &lt;a href=&quot;http://docs.python.org/lib/module-itertools.html&quot;&gt;itertools module&lt;/a&gt;, and study &lt;code&gt;test_generators.py&lt;/code&gt; carefully.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you liked this article, try more Word Aligned articles &lt;a href=&quot;http://wordaligned.org/tag/streams/&quot;&gt;tagged &amp;#8220;streams&amp;#8221;&lt;/a&gt;. And if you like puzzles, there are more articles &lt;a href=&quot;http://wordaligned.org/tag/puzzles/&quot;&gt;tagged &amp;#8220;puzzles&amp;#8221;&lt;/a&gt; too.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The graphs in this article are generated using the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;Google chart API&lt;/a&gt;, which is both useful and &lt;span /&gt;a fine example of how to design and document a programming interface.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
<dc:date>2007-12-17</dc:date>
<guid>http://wordaligned.org/articles/the-maximum-subsequence-problem</guid>
<author>tag@wordaligned.org (Thomas Guest)</author>
<link>http://wordaligned.org/articles/the-maximum-subsequence-problem</link>
<category>Charts</category>
</item>

<item>
<title>So many feeds, so little news</title>
<description>&lt;p&gt;I consume the internet using &lt;a href=&quot;http://www.mozilla.com/firefox/&quot;&gt;a web browser&lt;/a&gt; and &lt;a href=&quot;http://reader.google.com&quot;&gt;a feed reader&lt;/a&gt;. Here&amp;#8217;s the pseudo-code:&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;find www -follow -type feed -print | sort

&lt;/pre&gt;

&lt;/div&gt;

&lt;h4 id=&quot;find&quot;&gt;Find&lt;/h4&gt;
&lt;p&gt;The &lt;code&gt;find&lt;/code&gt; process seeds itself. When I read something I like I follow promising links; and if I &lt;em&gt;do&lt;/em&gt; like what I then find, I click the feed icon in the browser address bar, and my preferences arrange for the feed to be filed by my news reader.&lt;/p&gt;
&lt;p&gt;&lt;img style=&quot;float:right;padding:10px;&quot; width=&quot;50%&quot; src=&quot;http://www.cricketschirping.com/processing/GraphLayout/GraphLayout.png&quot; alt=&quot;Part of a graph&quot; /&gt;&lt;/p&gt;
&lt;p&gt;So I&amp;#8217;m recursively walking a massive directed graph. The further I explore, the more there is to be explored. I haven&amp;#8217;t yet added the same node twice (I do at least remember where I&amp;#8217;ve been and what I&amp;#8217;ve already added) but it&amp;#8217;s only a matter of time (and now I think about it, I &lt;em&gt;have&lt;/em&gt; added planets which syndicate feeds I&amp;#8217;ve already subscribed to).&lt;/p&gt;
&lt;p&gt;Should I tire of this auto-discovery, my feed reader will happily, and with unnerving accuracy, offer its own recommendations.&lt;/p&gt;
&lt;h4 id=&quot;sort&quot;&gt;Sort&lt;/h4&gt;
&lt;p&gt;The subsequent &lt;code&gt;sort&lt;/code&gt; isn&amp;#8217;t too bad. My reader supports various filing and filtering and viewing operations.&lt;/p&gt;
&lt;h4 id=&quot;uniq&quot;&gt;Uniq&lt;/h4&gt;
&lt;p&gt;What I&amp;#8217;m starting to want, though, is &lt;code&gt;uniq&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;typocode&quot;&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;find www -type feed -follow -print | sort | uniq

&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;Last week half a dozen feeds I subscribe to reported that &lt;a href=&quot;http://www.python.org/news/index.html#Fri07Dec20071020-0800&quot;&gt;Python3.0a2 had been released&lt;/a&gt;; none added much news to that headline. Similarly lots of people told me about the &lt;a href=&quot;http://code.google.com/apis/chart/&quot;&gt;google chart API launch&lt;/a&gt; &amp;#8212; though in in this case, some had something &lt;a href=&quot;http://www.dougma.com/archives/56&quot;&gt;original&lt;/a&gt; to report. It&amp;#8217;s fuzzy &lt;code&gt;uniq&lt;/code&gt; I need, a filter which kills hollow echoes and keeps thoughtful commentary.&lt;/p&gt;
&lt;p&gt;My feed reader shows me what&amp;#8217;s been updated. It can&amp;#8217;t show me what&amp;#8217;s new.&lt;/p&gt;</description>
<dc:date>2007-12-11</dc:date>
<guid>http://wordaligned.org/articles/so-many-feeds-so-little-news</guid>
<author>tag@wordaligned.org (Thomas Guest)</author>
<link>http://wordaligned.org/articles/so-many-feeds-so-little-news</link>
<category>Charts</category>
</item>

</channel>
</rss>
